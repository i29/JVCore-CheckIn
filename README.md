# JVCore 区块链签到系统

一个基于 JNS DAO 网络的现代化区块链签到 DApp，为 JVCore 社区成员提供便捷的签到体验。

## ✨ 功能特性

- 🔗 **多钱包支持**: 支持 MetaMask、欧易钱包等主流 Web3 钱包
- 🎯 **智能签到**: 基于智能合约的去中心化签到系统
- 👥 **NFT 成员验证**: 自动检查 JVCore NFT 持有状态和成员编号
- 🎨 **炫酷 UI**: 粒子动画效果和现代化渐变设计
- 📱 **响应式设计**: 完美适配桌面端和移动端
- ⚡ **流畅体验**: 单页应用，无刷新操作
- 🛡️ **稳定性优化**: 防抖机制，特别优化欧易客户端兼容性
- 💡 **智能提示**: 状态信息固定显示，不影响操作区域

## 🚀 快速开始

### 1. 环境准备

- 安装 [MetaMask](https://metamask.io/) 浏览器插件或使用欧易钱包
- 确保钱包连接到 JNS DAO 网络
- 持有 JVCore NFT（成为社区成员）

### 2. 网络配置

系统会自动引导您添加 JNS DAO 网络，网络参数如下：

```
网络名称: JNS DAO Network
链 ID: 3666 (0xe52)
RPC URL: https://rpc.jnsdao.com:8503
货币符号: J
区块浏览器: https://jscan.jnsdao.com
```

### 3. 启动应用

直接在浏览器中打开 `index.html` 文件，或访问部署的在线版本。

## 📖 使用说明

### 连接钱包
1. 点击「连接钱包」按钮
2. 选择 MetaMask 或欧易钱包进行连接
3. 系统会自动检查网络并引导切换到 JNS DAO 网络
4. 连接成功后自动验证 JVCore 成员状态

### 签到操作
1. 确保钱包已连接且为 JVCore 成员
2. 当月未签到时，「立即签到」按钮会自动显示
3. 点击签到按钮，在钱包中确认交易
4. 等待交易确认，系统会显示签到成功状态

### 成员信息
- 自动检查并显示持有的 JVCore NFT 数量和编号
- 显示最后签到时间和本月签到状态
- 非成员用户会看到相应提示信息
- 成员状态实时更新，无需手动刷新

## 🏗️ 技术架构

### 前端技术栈
- **HTML5**: 语义化标记和现代化结构
- **CSS3**: 渐变设计、动画效果和响应式布局
- **原生 JavaScript**: 模块化架构，无框架依赖
- **Web3.js**: 区块链交互和钱包连接

### 区块链技术
- **JNS DAO 网络**: 基于 EVM 兼容的高性能区块链
- **JVCore 智能合约**: 集成签到和 NFT 功能的统一合约
- **合约地址**: `0x8d214415b9c5F5E4Cf4CbCfb4a5DEd47fb516392`

## 📁 项目结构

```
j-checkin/
├── index.html          # 主应用文件（包含HTML、CSS、JavaScript）
├── README.md          # 项目说明文档
├── vercel.json        # Vercel 部署配置
├── .vercelignore      # Vercel 忽略文件配置
└── .vercel/           # Vercel 部署相关文件
    └── project.json
```

## 🔧 核心功能模块

### 应用状态管理 (AppState)
- Web3 实例管理
- 用户账户状态
- 智能合约实例

### 合约管理器 (ContractManager)
- JVCore 合约初始化
- 合约实例管理

### 成员管理器 (MemberManager)
- NFT 持有状态检查
- 成员编号获取
- 签到历史查询

### 签到管理器 (CheckInManager)
- 签到操作执行
- 交易状态处理
- 错误处理机制

### 网络管理器 (NetworkManager)
- 自动网络切换
- JNS DAO 网络配置
- 网络兼容性处理

### UI 管理器 (UIManager)
- 状态消息显示
- 界面元素更新
- 加载状态管理

## 📋 JVCore 合约接口

### 签到相关方法
- `checkIn()`: 执行签到操作
- `getCheckInCount(address)`: 获取用户总签到次数
- `getLastCheckInTime(address)`: 获取最后签到时间戳
- `getCheckInHistory(address)`: 获取签到历史记录

### NFT 相关方法
- `balanceOf(address)`: 获取 NFT 持有数量
- `tokenOfOwnerByIndex(address, index)`: 获取指定索引的 Token ID
- `tokenURI(tokenId)`: 获取 Token 元数据 URI
- `ownerOf(tokenId)`: 获取 Token 所有者地址

## 🔒 安全说明

- **隐私保护**: 应用仅读取钱包地址和 NFT 信息，不存储任何私钥
- **交易安全**: 所有签到操作需要用户在钱包中主动确认
- **数据安全**: 不收集或存储用户的敏感信息
- **钱包安全**: 建议使用官方 MetaMask 或欧易钱包插件
- **网络安全**: 自动验证网络配置，防止钓鱼攻击

## 🌐 浏览器兼容性

### 推荐浏览器
- **Chrome** 88+ ✅
- **Firefox** 85+ ✅
- **Safari** 14+ ✅
- **Edge** 88+ ✅

### 移动端支持
- **MetaMask 移动端** ✅
- **欧易钱包移动端** ✅
- **其他 Web3 浏览器** ✅

## 🔧 故障排除

### 钱包连接问题
1. **检查钱包插件**: 确保已安装并启用 MetaMask 或欧易钱包
2. **网络问题**: 检查网络连接，确保能访问区块链网络
3. **权限问题**: 在钱包中授权网站连接权限
4. **刷新重试**: 刷新页面或重启浏览器

### 网络切换问题
1. **自动切换**: 系统会自动提示切换到 JNS DAO 网络
2. **手动添加**: 如果自动添加失败，请手动添加网络配置
3. **RPC 问题**: 检查网络 RPC 连接是否正常

### 签到操作问题
1. **成员验证**: 确认持有 JVCore NFT 且为有效成员
2. **Gas 费用**: 确保钱包中有足够的原生代币支付 Gas
3. **重复签到**: 每月只能签到一次，检查是否已完成本月签到
4. **交易失败**: 检查网络状况，必要时调整 Gas 价格

### 页面显示问题
1. **缓存清理**: 清除浏览器缓存和 Cookie
2. **JavaScript**: 确保浏览器启用 JavaScript
3. **兼容性**: 尝试使用推荐的浏览器版本
4. **网络问题**: 检查是否能正常访问区块链网络

### 欧易客户端问题
1. **页面刷新**: 已优化防抖机制，避免频繁刷新
2. **网络切换**: 在欧易客户端中会智能处理网络变化
3. **兼容性**: 针对欧易客户端进行了特殊优化

## 👨‍💻 开发说明

### 本地开发环境
1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd j-checkin
   ```

2. **启动本地服务器**
   ```bash
   # 使用 Python
   python3 -m http.server 8000
   
   # 或使用 Node.js
   npx serve .
   ```

3. **访问应用**
   - 打开浏览器访问 `http://localhost:8000`
   - 确保安装了 MetaMask 或欧易钱包插件

### 部署配置

#### Vercel 部署
- 项目已配置 `vercel.json` 文件
- 支持一键部署到 Vercel 平台
- 自动 HTTPS 支持，满足 Web3 安全要求

#### 其他平台
- **Netlify**: 直接拖拽文件夹部署
- **GitHub Pages**: 推送到 gh-pages 分支
- **IPFS**: 去中心化部署选项

### 自定义配置

#### 合约配置
```javascript
// 在 index.html 中修改 CONFIG 对象
const CONFIG = {
    jvcore: {
        address: '0x8d214415b9c5F5E4Cf4CbCfb4a5DEd47fb516392', // 合约地址
        network: {
            chainId: '0xe52',  // 链 ID (3666)
            chainName: 'JNS DAO Network',
            // ... 其他网络配置
        }
    }
};
```

#### 样式自定义
- 修改 CSS 变量调整主题色彩
- 自定义粒子动画效果
- 调整响应式布局断点

#### 功能扩展
- 添加新的合约方法调用
- 扩展成员信息显示
- 集成其他 Web3 功能

### 代码架构

#### 模块化设计
- **状态管理**: 集中式应用状态
- **合约交互**: 独立的合约管理器
- **UI 控制**: 分离的界面管理逻辑
- **错误处理**: 统一的异常处理机制

#### 最佳实践
- 使用 ES6+ 语法
- 模块化函数设计
- 异步操作处理
- 用户体验优化

## 📄 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件

---

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进项目！

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 提交 GitHub Issue
- 加入 JNS DAO 社区讨论

---

**注意**: 这是一个演示项目，实际使用前请确保合约已正确部署并经过安全审计。